<div class="d-flex justify-content-between align-items-center mb-3">
  <h1 class="h4 mb-0"><%= @badge.name %></h1>
  <div class="d-flex gap-2">
    <% if can? :update, @badge %>
      <%= link_to "Editar", edit_badge_path(@badge), class: "btn btn-secondary btn-sm" %>
    <% end %>
    <% if can? :destroy, @badge %>
      <%= button_to "Eliminar", badge_path(@badge), method: :delete,
            form: { data: { turbo_confirm: "¿Eliminar este badge?" } },
            class: "btn btn-danger btn-sm" %>
    <% end %>
    <%= link_to "Volver", badges_path, class: "btn btn-outline-dark btn-sm" %>
  </div>
</div>

<div class="card">
  <div class="card-body">
    <p><strong>Creado:</strong> <%= l(@badge.created_at, format: :short) %></p>
    <p><strong>Actualizado:</strong> <%= l(@badge.updated_at, format: :short) %></p>

    <% if @badge.respond_to?(:users) && @badge.users.any? %>
      <h5 class="mt-3">Usuarios con este badge:</h5>
      <ul>
        <% @badge.users.each do |user| %>
          <li>
            <% if can? :read, user %>
              <%= link_to "#{user.first_name} #{user.last_name}", user_path(user) %>
            <% else %>
              <%= "#{user.first_name} #{user.last_name}" %>
            <% end %>
          </li>
        <% end %>
      </ul>
    <% else %>
      <p class="text-muted mb-0">Este badge aún no ha sido asignado a ningún usuario.</p>
    <% end %>
  </div>
</div>
